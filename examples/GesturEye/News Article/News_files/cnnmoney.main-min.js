var vidConfig=[];var cnnEnableCL=true;var is_iOS=((navigator.userAgent.indexOf("iPad")!==-1)||(navigator.userAgent.indexOf("iPhone")!==-1)||(navigator.userAgent.indexOf("iPod")!==-1));var cnnDocDomain="";if(location.hostname.indexOf("cnn.com")>0){cnnDocDomain="cnn.com";}if(location.hostname.indexOf("turner.com")>0){if(document.layers){cnnDocDomain="turner.com:"+location.port;}else{cnnDocDomain="turner.com";}}if(cnnDocDomain){document.domain=cnnDocDomain;}function getQSParam(c){c=c.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a="[\\?&]"+c+"=([^&#]*)";var d=new RegExp(a);var b=d.exec(window.location.href);if(b==null){return"";}else{return decodeURIComponent(b[1].replace(/\+/g," "));}}function chooseMagOFIE(){var a="fo_336x165_specialofie_0408.js";var b=Math.floor(Math.random()*2);if(location.pathname.match("fortune")){if(location.pathname.match(".htm$")){a="fo_336x225_foapofie_0408.js";}else{if(location.pathname.match("toc.html")){a="fo_336x165_fotocofie_0408.js";}else{if(location.pathname.match("popups")||location.pathname.match("/galleries")){a="fo_336x165_gallofie_0408.js";}else{if(location.pathname.match("/magazines/fortune")&&(typeof sectionType=="undefined"||sectionType!="archive")){a="fo_336x165_rankofie_0408.js";}else{a="fo_336x165_specialofie_0408.js";}}}}}else{if((location.pathname=="/magazines/moneymag/")||(location.pathname=="/magazines/moneymag/index.html")){a="mo_336x165_molandingpg_0908.js";}else{if(location.pathname.match("moneymag")){if(location.pathname.match(".htm$")){a="mo_336x216_moartpg_0908.js";}else{if(location.pathname.match("popups")){a="mo_336x216_moartpg_0908.js";}else{a="mo_336x216_moartpg_0908.js";}}}else{if((location.pathname=="/magazines/business2/")||(location.pathname=="/magazines/business2/index.html")){a="fo_336x165_b20hpofie_0408.js";}else{if(location.pathname.match("business2")||location.pathname.match("biz2")){if(location.pathname.match(".htm$")){a="fo_336x225_b20apofie_0408.js";}else{if(location.pathname.match("popups")||location.pathname.match("/galleries")){a="fo_336x165_gallofie_0408.js";}else{if(location.pathname.match("/magazines/business2")&&(typeof sectionType=="undefined"||sectionType!="archive")){a="fo_336x165_rankofie_0408.js";}else{a="fo_336x165_specialofie_0408.js";}}}}else{if((location.pathname=="/magazines/fsb/")||(location.pathname=="/magazines/fsb/index.html")){a="fo_336x165_fsbhpofie_0408.js";}else{if(location.pathname.match("fsb")){if(location.pathname.match(".htm$")){a="fo_336x225_fsbapofie_0408.js";}else{if(location.pathname.match("toc.html")){a="fo_336x165_fsbtocofie_0408.js";}else{if(location.pathname.match("popups")||location.pathname.match("/galleries")){a="fo_336x165_gallofie_0408.js";}else{if(location.pathname.match("/magazines/fsb")&&(typeof sectionType=="undefined"||sectionType!="archive")){a="fo_336x165_rankofie_0408.js";}else{a="fo_336x165_specialofie_0408.js";}}}}}else{if(b==0){if((location.pathname=="/")||(location.pathname=="/index.html")){a="fo_336x165_cnnhpofie_0408.js";}else{if(location.pathname.match("/services/newsletters/")){a="fo_336x165_cnnofie_0408.js";}else{if(location.pathname.match(".htm$")){a="fo_336x225_cnnapofie_0408.js";}else{if(location.pathname.match("popups")||location.pathname.match("/galleries")){a="fo_336x165_gallofie_0408.js";}else{a="fo_336x165_specialofie_0408.js";}}}}}else{if(b==1){if((location.pathname=="/")||(location.pathname=="/index.html")){a="mo_336x165_cnnmoneyhp_0908.js";}else{if(location.pathname.match(".htm$")){a="mo_336x216_moartpg_0908.js";}else{if(location.pathname.match("popups")||location.pathname.match("/galleries")){a="mo_336x216_moartpg_0908.js";}else{a="mo_336x216_moartpg_0908.js";}}}}}}}}}}}}document.write('<script type="text/javascript" src=\'http://i.cdn.turner.com/money/.element/ssi/sections/mag/'+a+"'><\/script>");}var twitter_popup=function(){jQuery(".soc-twtname").click(function(){var h="scrollbars=yes,resizable=yes,toolbar=no,location=yes",d=550,a=420,c=screen.height,b=screen.width;var g=Math.round((b/2)-(d/2));var f=0;if(c>a){f=Math.round((c/2)-(a/2));}window.open(this.href,"intent",h+",width="+d+",height="+a+",left="+g+",top="+f);return false;});};var cnnm_sourcing={sourceTypes:{cnnmoney:"CNN",fortune:"FORT",moneymag:"MONEY"},getURLSource:function(a){source=this.sourceTypes.cnnmoney;var b=a.split("http://");if(b.length>1){b=b[1].split("/");b=b[0];}if(a.indexOf(".fortune")!=-1||a.indexOf("magazines/fortune")!=-1){source=this.sourceTypes.fortune;}if(a.indexOf(".moneymag")!=-1||a.indexOf("magazines/moneymag")!=-1){source=this.sourceTypes.moneymag;}switch(b){case ("features.blogs.fortune.cnn.com"):case ("finance.fortune.cnn.com"):case ("management.fortune.cnn.com"):case ("postcards.blogs.fortune.cnn.com"):case ("tech.fortune.cnn.com"):case ("techland.blogs.fortune.cnn.com"):case ("thewheeldeal.blogs.fortune.cnn.com"):case ("stanleybing.blogs.fortune.cnn.com"):source=this.sourceTypes.fortune;break;case ("moremoney.blogs.money.cnn.com"):case ("readerschoice.blogs.money.cnn.com"):case ("helpdesk.blogs.money.cnn.com"):source=this.sourceTypes.moneymag;break;case ("cnnmoneytest.wordpress.com"):case ("cnnmoneytalkback.blogs.cnnmoney.cnn.com"):case ("smallbusiness.blogs.cnnmoney.cnn.com"):default:}return source;}};function CSIManager(){if((CSIManager.caller&&CSIManager.getInstance)&&(CSIManager.caller!=CSIManager.getInstance)){if((navigator.userAgent.indexOf("Safari")==-1)&&(navigator.userAgent.indexOf("Opera")==-1)){throw new Error("There is no public constructor for CSIManager.");}}this.CSIObjects=new Array();this.delayedCSIList=new Array();this.domIDConfig=new Array();this.domOnLoad=new Array();this.domOnBeforeLoad=new Array();this.useDelayedCSI=false;this.numberofRequests=0;var a=new Date();this.iframeOffset=0;this.queueAllCalls=false;this.queuedCallArray=new Array();this.eventTypes=new Array();this.currentEventType="";this.eventTypeFunctions=new Array();this.watchEventTypeNodes=new Array();this.isPolling=false;this.pollingInterval=10000;this.minimumInterval=9999;this.domRefreshHook=false;this.pollingUrl=false;var d=navigator.userAgent.toLowerCase();if((d.indexOf("msie")>-1)&&(d.indexOf("mac")>-1)){this.useDelayedCSI=true;}this.dojoSupport=(typeof dojo=="undefined")?false:true;this.prototypeSupport=(typeof Prototype=="undefined")?false:true;this.noFramework=(!this.dojoSupport&&!this.prototypeSupport)?true:false;var f=this;var c=function(){f.initialize();};var b=function(h){if(h.persisted){window.setTimeout("CSIManager.getInstance().delayedProcessing();",2000);}};if(this.prototypeSupport){Event.observe(window,"load",c);Event.observe(window,"pageshow",b);}else{if(this.dojoSupport){dojo.addOnLoad(c);}else{if(this.noFramework){if(window.addEventListener){window.addEventListener("load",c,false);window.addEventListener("pageshow",b,false);}else{if(window.attachEvent){window.attachEvent("onload",c);}else{var g=null;if(window.onload){g=window.onload;}window.onload=function(){c();if(g!=null){g();}};}}}}}}CSIManager.prototype.initialize=function(){if(!this.useDelayedCSI){this.queueAllCalls=true;var a=document.createElement("div");a.setAttribute("id","csimanagerdiv");document.body.appendChild(a);var a=document.createElement("div");a.setAttribute("id","csimanagerdivdelayed");document.body.appendChild(a);this.useDelayedCSI=true;this.queueAllCalls=false;this.processAnyQueuedCalls();this.queuedCallArray=null;}};CSIManager.prototype.processAnyQueuedCalls=function(){if(this.queuedCallArray&&this.queuedCallArray!=null){for(var b=0;b<this.queuedCallArray.length;b++){var a=this.queuedCallArray[b];this.queuedCallArray[b]="";if(a){this.call(a.url,a.args,a.domId,a.funcObj,a.breakCache,a.overrideID);}}}};CSIManager.__instance__=null;CSIManager.getInstance=function(){if(this.__instance__==null){this.__instance__=new CSIManager();}return this.__instance__;};CSIManager.prototype.addOnLoadById=function(c,b){var a=this.domOnLoad[c];if(!a){a=new Array();}a.push(b);this.domOnLoad[c]=a;};CSIManager.prototype.addOnBeforeLoadById=function(c,b){var a=this.domOnBeforeLoad[c];
if(!a){a=new Array();}a.push(b);this.domOnBeforeLoad[c]=a;};CSIManager.prototype.setConfigForId=function(b,a){this.domIDConfig[b]=a;};CSIManager.prototype.getConfigForId=function(b){var a=this.domIDConfig[b];if(!a){a=new Object();}return a;};CSIManager.prototype.registerEventType=function(b,a){if(b&&a){this.eventTypes[b]=a;}};CSIManager.prototype.callObject=function(callObj,eventType){var resultObj;var url;var args;var domId;var decoratingFunction;var breakCache;var overrideID;var callEventType=eventType;var forcediframe;this.currentEventType=eventType;if(callObj){resultObj=callObj;url=resultObj.url;args=resultObj.args;domId=resultObj.domId;funcObj=resultObj.funcObj;breakCache=resultObj.breakCache;overrideID=resultObj.overrideID;forcediframe=resultObj.isIframeForced;if(this.queueAllCalls){var queuedObj=new Object();queuedObj.url=url;queuedObj.args=args;queuedObj.domId=domId;queuedObj.funcObj=funcObj;queuedObj.breakCache=breakCache;queuedObj.overrideId=overrideId;this.queuedCallArray.push(queuedObj);}else{if((!this.useDelayedCSI)&&(document&&document.readyState&&(document.readyState=="complete"))){this.initialize();}if(forcediframe===undefined||forcediframe===false){forcediframe=false;if(url.indexOf("http")==0){forcediframe=true;if(url.indexOf(window.location.hostname)>-1){forcediframe=false;}}}this.numberofRequests++;var internalDomId="csi"+(this.iframeOffset+this.numberofRequests);if(overrideID){internalDomId=overrideID;}var domList=new Array();var functionList=new Array();if(url.indexOf(document.domain)==-1&&url.indexOf("http")>-1){return false;}if(domId.join){domList=domId;}else{domList.push(domId);}if(funcObj){if(funcObj.join){functionList=funcObj;}else{functionList.push(funcObj);}}this.CSIObjects[internalDomId]={functionList:functionList,dom:domList,url:url,args:args,csiRequestNum:this.numberofRequests,disableCache:breakCache};var newCSI=new Object();newCSI.src=url;newCSI.id=internalDomId;newCSI.domId=domList;newCSI.args=args;newCSI.breakCache=breakCache;newCSI.csiRequestNum=this.numberofRequests;this.delayedCSIList[this.delayedCSIList.length]=newCSI;var today=new Date();var currTime=today.getTime()%60;var iframeArgs=(breakCache)?"time="+currTime:"";if(args){iframeArgs=(iframeArgs)?iframeArgs+"&":"";iframeArgs+=args;}if(forcediframe===false){try{if(funcObj){var xhrObject=null;if(this.dojoSupport){try{if(navigator.userAgent.toLowerCase().indexOf("msie 7.0")!=-1){throw new Error("NoDojoSupport");}var bindArgs={url:url+"?"+iframeArgs+"&csiID="+internalDomId,mimetype:"text/html",transport:"IframeTransport"};xhrObject=dojo.io.bind(bindArgs);}catch(err){throw new Error("DojoFailure");}}else{if(this.prototypeSupport){try{if(navigator.userAgent.toLowerCase().indexOf("safari")!=-1){throw new Error("SafariCrossDomainFailure");}var csiMgr=this;xhrObject=new Ajax.Request(url,{method:"get",parameters:iframeArgs+"&csiID="+internalDomId,onComplete:function(response){if(response&&response.responseText&&response.responseText.indexOf('id="jsCode"')!=-1){var startStr='id="jsCode"';var startPos=response.responseText.indexOf(startStr)+startStr.length;var firstSlice=response.responseText.slice(startPos,response.responseText.indexOf("</textarea>"));var beginningNode=firstSlice.indexOf(">")+1;var myCode=firstSlice.substring(beginningNode);var obj=eval("("+myCode+")");csiMgr.callBackJS(obj,internalDomId);}if(response&&(!response.responseText)){callObj.isIframeForced=true;CSIManager.getInstance().callObject(callObj,eventType);}},onException:function(x,o){throw new Error("PrototypeException for url ["+url+"]: "+o.messageText);},onFailure:function(x,o){throw new Error("PrototypeFailure");}});}catch(err){throw new Error("PrototypeFailure");}}else{throw new Error("NoXHRFramework");}}}else{throw new Error("NoCallBackFunction");}}catch(err){forcediframe=true;}}if(forcediframe){if(this.useDelayedCSI){var realIframeUrl=url+"?"+iframeArgs+"&csiID="+internalDomId;var iframeObj=document.createElement("iframe");iframeObj.setAttribute("src",realIframeUrl);iframeObj.setAttribute("id","csiDataIframe"+internalDomId);iframeObj.setAttribute("name","csiDataIframe"+internalDomId);iframeObj.setAttribute("width","10");iframeObj.setAttribute("height","10");iframeObj.setAttribute("style","visibility:hidden;position:absolute;top:0px;left:-100px;");iframeObj.style.top="0px";iframeObj.style.left="-100px";iframeObj.style.position="absolute";var containerDiv=document.createElement("div");containerDiv.setAttribute("id","csiIframeObjs"+internalDomId);containerDiv.appendChild(iframeObj);if(document.getElementById("csimanagerdiv")){document.getElementById("csimanagerdiv").appendChild(containerDiv);if(navigator.userAgent.indexOf("MSIE")!=-1){window.setTimeout("var tmpIframObj=document.getElementById('csiDataIframe"+internalDomId+"');if(tmpIframObj.readyState=='uninitialized'){tmpIframObj.src=tmpIframObj.getAttribute('src');tmpIframObj.position='absolute';tmpIframObj.style.left='-100px';}",500);}}}else{var iframeHtmlSrc='<div id="csiIframeObjs'+internalDomId+'"><iframe src="'+url+"?"+iframeArgs+"&csiID="+internalDomId+'" name="csiDataIframe'+internalDomId+'" id="csiDataIframe'+internalDomId+'" width="10" height="10" style="visibility:hidden;position:absolute;top:0px;left:-100px;"></iframe></div>';document.write(iframeHtmlSrc);}}}}};CSIManager.prototype.call=function(a,h,c,b,i,d,j,f){var g=new Object();g.url=a;g.args=h;g.domId=c;g.funcObj=b;g.breakCache=i;g.overrideID=d;g.isIframeForced=f;revertToCallObject(g,j);};CSIManager.prototype.callBackHtml=function(b,f){var a=false;if(document.getElementById){a=document.getElementById(f);if(!a){if(this.CSIObjects[f]&&this.CSIObjects[f].dom){f=this.CSIObjects[f].dom;a=document.getElementById(f);}}}else{if(document.all){a=document.all[f];if(!a){if(this.CSIObjects[f]&&this.CSIObjects[f].dom){f=this.CSIObjects[f].dom;a=document.all[f];}}}}if(a){a.innerHTML=b;}var c=0;if(c){var d=c.style.top||"0px";c.style.top="1px";c.style.top=d;}};CSIManager.prototype.callBackJS=function(p,n){if(this.CSIObjects[n]){var b=this.CSIObjects[n].functionList;var m=this.CSIObjects[n].dom;if(b){var q=b.length;var c=m.length;if(q!=c){if(c<q){var l=m[c-1];for(var h=c;h<q;h++){m.push(l);}c=m.length;}else{var a=b[q-1];for(var h=q;h<c;h++){b.push(a);}q=b.length;}}for(var j=0;j<b.length;j++){var k=b[j];if(k){var f=this.getConfigForId(m[j]);var o=this.domOnBeforeLoad[m[j]];if(o){for(var h=0;h<o.length;h++){var d=o[h];d(p,m[j],f);}}this.callBackHtml(k(p,m[j],f,this.currentEventType),m[j]);var g=this.domOnLoad[m[j]];if(g){for(var h=0;h<g.length;h++){var d=g[h];d(p,m[j],f);}}}}this.CSIObjects[n]="";}}};CSIManager.prototype.delayedProcessing=function(){if(document.body&&document.body.innerHTML&&this.useDelayedCSI){var d=document.getElementById("csimanagerdivdelayed")||document.all["csimanagerdivdelayed"];var j="";for(var g=0;g<this.delayedCSIList.length;g++){var a=this.delayedCSIList[g].src;var b=this.delayedCSIList[g].id;var i=new Date();var h=this.delayedCSIList[g].breakCache;var c=i.getTime()%60;var f=(h)?"&time="+c:"";if(this.delayedCSIList[g].args){f=f+"&"+this.delayedCSIList[g].args;}j+='<iframe src="'+a+"?csiID="+b+f+'" name="csiDataIframe'+b+'" id="csiDataIframe'+b+'" width="10" height="10" style="visibility:hidden;position:absolute;top:0px;left:-100px;"></iframe>';}if(d){d.innerHTML=j;}}};CSIManager.prototype.handleClientData=function(cliWinbj,cliDoc){var targetWindow=top;try{if(parent.CSIManager){targetWindow=parent;}}catch(err){}var docId="";var paramStr=cliWinbj.location.hash;if(!paramStr){paramStr=cliWinbj.location.search.substring(1);}var queryId="";var keyValPairs=paramStr.split("&");if(!keyValPairs){keyValPairs=new Array();keyValPairs[keyValPairs.length]=query;}for(var counter=0;counter<keyValPairs.length;counter++){var keyVal=keyValPairs[counter].split("=");if(keyVal[0]=="csiID"){queryId=keyVal[1];counter=keyValPairs.length+1;}}var wId="";if(cliWinbj.name&&(cliWinbj.name.indexOf("csiDataIframe")==0)){wId=cliWinbj.name.substring(13);}if(wId==""&&cliWinbj.frameElement&&cliWinbj.frameElement.id&&(cliWinbj.frameElement.id.indexOf("csiDataIframe")==0)){wId=cliWinbj.frameElement.id.substring(13);
}docId=wId;if(cliDoc.mainForm.htmlArea&&cliDoc.mainForm.htmlArea.value){var rawHtml=cliDoc.mainForm.htmlArea.value;if(rawHtml){targetWindow.CSIManager.getInstance().callBackHtml(rawHtml,docId);}}else{if(cliDoc.mainForm.jsCode.value){var rawJS=cliDoc.mainForm.jsCode.value;if(rawJS){targetWindow.CSIManager.getInstance().callBackJS(eval("("+rawJS+")"),docId);}}}};CSIManager.prototype.registerEventTypeNode=function(b,a){if(this.eventTypes[a]){this.watchEventTypeNodes[b]=a;}if(!this.isPolling){this.startPoll();}};CSIManager.prototype.setPollingUrl=function(b,a){this.pollingUrl=b;if(a&&a>this.minimumInterval){this.pollingInterval=a;}};CSIManager.prototype.startPoll=function(){if(!this.isPolling&&(this.pollingUrl)){this.pollingId=window.setTimeout("CSIManager.getInstance().poll()",this.pollingInterval);this.isPolling=true;}};CSIManager.prototype.poll=function(){if(!this.domRefreshHook){var a=document.createElement("iframe");this.domRefreshHook=document.body.appendChild(a);}this.domRefreshHook.setAttribute("src",this.pollingUrl);};CSIManager.prototype.handleData=function(d){this.isPolling=false;if(d.intervalTime){if(d.intervalTime>this.minimumInterval){this.pollingInterval=d.intervalTime;}}if(d.entries){for(var a=0;a<d.entries.length;a++){var f=d.entries[a];var c=this.watchEventTypeNodes[f];if(c){var b=this.eventTypes[c];b(c,f);}}}this.startPoll();};CSIManager.prototype.reset=function(){this.eventTypes=new Array();this.currentEventType="";this.eventTypeFunctions=new Array();this.watchEventTypeNodes=new Array();};CSIManager.getInstance();function revertToCallObject(b,a){CSIManager.getInstance().callObject(b,a);}StrategyInterface.ContentType={AD:"ad",CONTENT:"ct"};StrategyInterface.AdPosition={PREROLL:"a1",MIDROLL:"a2",POSTROLL:"a3",OVERLAY:"a4",SPECIAL:"a5"};StrategyInterface.VideoState={UNPLAYED:"s1",PLAYED:"s2",STOPPED:"s3",COMPLETED:"s4"};function StrategyInterface(a){this._isReady=false;this.hasVideoPlayed=false;this.hasAdPlayed=false;this._player=a;}StrategyInterface.prototype.isReady=function(){if(this._isReady!=true){this._isReady=this._player.isVideoPlaying();return this._isReady;}return this._isReady;};StrategyInterface.prototype.getTitle=function(){return this._player.getHeadline();};StrategyInterface.prototype.getVideoPath=function(){return this._player.getVideoURL();};StrategyInterface.prototype.getContentType=function(){if(this._player.isAdPlaying()){return StrategyInterface.ContentType.AD;}return StrategyInterface.ContentType.CONTENT;};StrategyInterface.prototype.getAdPosition=function(){return StrategyInterface.AdPosition.PREROLL;};StrategyInterface.prototype.getTotalDuration=function(){return this._player.getDuration();};StrategyInterface.prototype.getState=function(){if(this._player.isAdPlaying()){this.hasAdPlayed=true;return StrategyInterface.VideoState.PLAYED;}else{if(this._player.isVideoPlaying()){this.hasVideoPlayed=true;return StrategyInterface.VideoState.PLAYED;}else{if(this._player.isPaused()){return StrategyInterface.VideoState.STOPPED;}else{if(this.hasVideoPlayed){this.hasVideoPlayed=false;this.hasAdPlayed=false;return StrategyInterface.VideoState.COMPLETED;}}}}return StrategyInterface.VideoState.UNPLAYED;};StrategyInterface.prototype.getCurrentPlayTime=function(){return this._player.getCurrentPlayTime();};StrategyInterface.prototype.getBitrate=function(){return 600;};StrategyInterface.prototype.getThumbnailPath=function(){return this._player.getThumbnail();};StrategyInterface.prototype.getPlayerType=function(){return"video clip";};StrategyInterface.prototype.getViewStartTime=function(){return(new Date())-this._player.getVideoStartTime();};StrategyInterface.prototype.getViewPlayTime=function(){if(this.hasVideoPlayed){return(new Date())-this._player.startTime;}return -1;};StrategyInterface.prototype.getViewAdPlayTime=function(){if(this.hasAdPlayed){return(new Date())-this._player.getViewAdPlayTime();}return -1;};StrategyInterface.verify=function(a){return true;};try{window["_cbv_strategies"]=window["_cbv_strategies"]||[];window["_cbv_strategies"].push(StrategyInterface);}catch(e){if(console&&console.log){console.log("Error pushing Chartbeat Strategy Interface");}}